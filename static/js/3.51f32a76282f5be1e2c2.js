webpackJsonp([3],{qRQr:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={components:{searchInput:t("o0m5").a},data:function(){return{tableData:[],pagination:{currentPage:1,totalPage:0,pagesize:10},searchForm:{jobName:"",serverIp:"",date:[],jobStatus:""},queryParams:{jobName:"",serverIp:"",date:[],jobStatus:"",orderColumn:"beginTime",orderType:!1},loading:!1,showTimeRangePanel:!1,btnBoxShow:!1,hidebtn:!1,showbtn:!0,searchclass:""}},computed:{},mounted:function(){this.searchArr=[{id:"1",label:"作业名称",value:"jobName",type:"input",maxLen:"50"},{id:"2",label:"作业状态",value:"jobStatus",type:"select",data:[{value:0,label:"成功"},{value:1,label:"失败"}]},{id:"3",label:"执行时间",value:"date",type:"date"}],this.search()},methods:{show:function(){this.hidebtn=!0,this.showbtn=!1,this.btnBoxShow=!0,this.searchclass="serheightZ",this.styleSear="style-sear"},hide:function(){this.hidebtn=!1,this.showbtn=!0,this.btnBoxShow=!1,this.searchclass="serheightS",this.styleSear="style-sear1"},toggleTimeRangePanel:function(){this.showTimeRangePanel=!this.showTimeRangePanel},handleRangeClose:function(){this.showTimeRangePanel=!1},pageChange:function(e){this.pagination.currentPage=e.page_index,this.pagination.pagesize=e.page_limit,this.search()},sortChangeEvent:function(e){this.queryParams.orderColumn=e.order?e.prop:"gmtCreate",this.queryParams.orderType=e.order,this.pagination.currentPage=1,this.search()},btnSearch:function(e){this.pagination.currentPage=1,this.queryParams.jobName=e.jobName,this.queryParams.jobStatus=e.jobStatus,null!=e.date&&null!=e.date[0]&&null!=e.date[1]?(this.queryParams.startTime=commonUtils.timestampToDate(e.date[0]),this.queryParams.endTime=commonUtils.timestampToDate(e.date[1])):(this.queryParams.startTime="",this.queryParams.endTime=""),this.search()},search:function(){var e=this;this.loading=!0,this.$RequestUtil.post({url:"/monitor/job/jobRunTrack",params:{jobName:""==this.queryParams.jobName?null:this.queryParams.jobName,result:this.queryParams.jobStatus,beginTime:this.queryParams.startTime,endTime:this.queryParams.endTime,current:this.pagination.currentPage,size:this.pagination.pagesize,orderByColumn:this.queryParams.orderColumn,asc:this.queryParams.orderType},success:function(a){"success"==a.result&&(e.tableData=a.data,e.pagination.totalPage=a.totalPages,e.loading=!1)}}).catch(function(){e.loading=!1})},searchPart:function(){this.pagination.currentPage=1,this.queryParams.jobName=this.searchForm.jobName,this.queryParams.serverIp=this.searchForm.serverIp,this.queryParams.jobStatus=this.searchForm.jobStatus,null!=this.searchForm.date&&null!=this.searchForm.date[0]&&null!=this.searchForm.date[1]?(this.queryParams.startTime=commonUtils.timestampToDate(this.searchForm.date[0]),this.queryParams.endTime=commonUtils.timestampToDate(this.searchForm.date[1])):(this.queryParams.startTime="",this.queryParams.endTime=""),this.search()},clearPart:function(){this.queryParams.jobName="",this.queryParams.serverIp="",this.queryParams.jobStatus="",this.queryParams.date=[],this.pagination.currentPage=1},transformStartTime:function(e){return""==e.beginTime?"":commonUtils.transformUTCToLocalTime(e.beginTime)},transformCompletionTime:function(e){return""==e.endTime?"":commonUtils.transformUTCToLocalTime(e.endTime)},transformJobName:function(e){return e.className+","+e.jobName}}},r={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"list-window"},[t("div",{staticClass:"searchbar"},[t("searchInput",{attrs:{"search-arr":e.searchArr},on:{clear:function(a){e.refresh()},search:function(a){e.btnSearch(a)}}})],1),e._v(" "),t("div",{staticClass:"list-div"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark","default-sort":{prop:e.queryParams.orderColumn,order:"descending"}},on:{"sort-change":e.sortChangeEvent}},[t("el-table-column",{attrs:{prop:"jobName",label:"作业名称",sortable:"custom"}}),e._v(" "),t("el-table-column",{attrs:{prop:"result",label:"执行结果",sortable:"custom","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{class:0==a.row.result?"colorGreen":"colorRed"},[e._v("\n            "+e._s(0==a.row.result?"成功":"失败")+"\n          ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"remark",label:"失败原因"}}),e._v(" "),t("el-table-column",{attrs:{prop:"beginTime",label:"开始时间","min-width":"50",sortable:"custom"}}),e._v(" "),t("el-table-column",{attrs:{prop:"endTime",label:"完成时间","min-width":"50",sortable:"custom"}})],1),e._v(" "),[t("Pagination",{attrs:{total:e.pagination.totalPage},on:{pageChange:e.pageChange}})]],2)])},staticRenderFns:[]};var i=t("C7Lr")(s,r,!1,function(e){t("rJ84")},"data-v-53d484ba",null);a.default=i.exports},rJ84:function(e,a){}});