webpackJsonp([2],{C8QK:function(a,t){},DCmn:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={components:{searchInput:e("o0m5").a},data:function(){return{tableData:[],jobStatusList:[],pagination:{currentPage:1,totalPage:0,pagesize:10},searchForm:{jobName:"",date:[],jobStatus:""},queryParams:{jobName:"",date:[],jobStatus:"",orderColumn:"gmtCreate",orderType:!1},loading:!1,showTimeRangePanel:!1}},computed:{},mounted:function(){this.searchArr=[{id:"1",label:"作业名称",value:"jobName",type:"input",maxLen:"50"},{id:"2",label:"作业状态",value:"jobStatus",type:"select",data:[{value:1,label:"等待运行"},{value:2,label:"运行中"},{value:3,label:"已完成"}]},{id:"3",label:"执行时间",value:"date",type:"date"}],this.search()},methods:{toggleTimeRangePanel:function(){this.showTimeRangePanel=!this.showTimeRangePanel},handleRangeClose:function(){this.showTimeRangePanel=!1},pageChange:function(a){this.pagination.currentPage=a.page_index,this.pagination.pagesize=a.page_limit,this.search()},sortChangeEvent:function(a){this.queryParams.orderColumn=a.order?a.prop:"gmtCreate",this.queryParams.orderType=a.order,this.pagination.currentPage=1,this.search()},btnSearch:function(a){this.pagination.currentPage=1,this.queryParams.jobName=a.jobName,this.queryParams.jobStatus=a.jobStatus,null!=a.date&&null!=a.date[0]&&null!=a.date[1]?(this.queryParams.startTime=commonUtils.timestampToDate(a.date[0]),this.queryParams.endTime=commonUtils.timestampToDate(a.date[1])):(this.queryParams.startTime="",this.queryParams.endTime=""),this.search()},search:function(){var a=this;this.loading=!0,this.$RequestUtil.post({url:"/monitor/job/jobRunStatus",params:{jobName:""==this.queryParams.jobName?null:this.queryParams.jobName,status:this.queryParams.jobStatus,beginTime:this.queryParams.startTime,endTime:this.queryParams.endTime,current:this.pagination.currentPage,size:this.pagination.pagesize,orderByColumn:this.queryParams.orderColumn,asc:this.queryParams.orderType},success:function(t){"success"==t.result&&(a.tableData=t.data,a.pagination.totalPage=t.totalPages,a.loading=!1)}}).catch(function(){a.loading=!1})},searchPart:function(){this.pagination.currentPage=1,this.queryParams.jobName=this.searchForm.jobName,this.queryParams.jobStatus=this.searchForm.jobStatus,null!=this.searchForm.date&&null!=this.searchForm.date[0]&&null!=this.searchForm.date[1]?(this.queryParams.startTime=commonUtils.timestampToDate(this.searchForm.date[0]),this.queryParams.endTime=commonUtils.timestampToDate(this.searchForm.date[1])):(this.queryParams.startTime="",this.queryParams.endTime=""),this.search()},clearPart:function(){this.searchForm.jobName="",this.searchForm.jobStatus="",this.searchForm.date=[]},transformStartTime:function(a){return""==a.gmtCreate?"":commonUtils.transformUTCToLocalTime(a.gmtCreate)},transformJobName:function(a){return a.className+","+a.jobName}}},s={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"list-window"},[e("div",{staticClass:"searchbar"},[e("searchInput",{attrs:{"search-arr":a.searchArr},on:{clear:function(t){a.refresh()},search:function(t){a.btnSearch(t)}}})],1),a._v(" "),e("div",{staticClass:"list-div"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:a.tableData,"tooltip-effect":"dark","default-sort":{prop:a.queryParams.orderColumn,order:"descending"}},on:{"sort-change":a.sortChangeEvent}},[e("el-table-column",{attrs:{prop:"jobName",label:"作业名称",sortable:"custom","min-width":"120"}}),a._v(" "),e("el-table-column",{attrs:{prop:"status",label:"状态",sortable:"custom"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("div",{class:1==t.row.status?"colorGray":2==t.row.status?"colorBlue":"colorGreen"},[a._v("\n            "+a._s(1==t.row.status?"等待运行":2==t.row.status?"运行中":"已完成")+"\n          ")])]}}])}),a._v(" "),e("el-table-column",{attrs:{prop:"gmtCreate",label:"创建时间",sortable:"custom"}}),a._v(" "),e("el-table-column",{attrs:{prop:"remark",label:"备注"},scopedSlots:a._u([{key:"default",fn:function(a){return[e("div",[e("textareaCheckRows",{attrs:{inputType:"pre",textValue:a.row.remark}})],1)]}}])})],1),a._v(" "),[e("Pagination",{attrs:{total:a.pagination.totalPage},on:{pageChange:a.pageChange}})]],2)])},staticRenderFns:[]};var o=e("C7Lr")(r,s,!1,function(a){e("C8QK")},"data-v-6a6688cd",null);t.default=o.exports}});