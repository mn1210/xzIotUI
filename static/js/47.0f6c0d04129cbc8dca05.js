webpackJsonp([47],{"+c5e":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={name:"company",computed:{userStatus:function(){return localStorage.getItem("wuyuanIotUserStatus")}},data:function(){var e=this;return{user:{},password:"",role:"",editVisible:!1,editForm:{id:localStorage.getItem("wuyuanIotUserId"),password:"",rePassword:"",oldPassword:"",nickName:"",tel:"",email:""},rules:{nickName:[{required:!0,message:"请填入昵称",trigger:"blur"}],password:[{required:!0,message:"请填入新密码",trigger:"blur"}],rePassword:[{required:!0,message:"请重新输入密码",trigger:"blur"},{validator:function(t,s,r){s!=e.editForm.password?r(new Error("两次输入密码不一致")):r()},trigger:"blur"}],oldPassword:[{required:!0,message:"请输入原密码",trigger:"blur"}],tel:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function(e,t,s){0==/^1[34578]\d{9}$/.test(t)?s(new Error("请输入正确的手机号")):s()},trigger:"blur"}],email:[{validator:function(e,t,s){/[\u4e00-\u9fa5]+/.test(t)?s(new Error("不能输入中文")):s()},trigger:"blur"},{type:"email",required:!0,message:"请填入正确的邮箱",trigger:"blur"}]},visible:{password:!1,nickName:!1,tel:!1,email:!1},hints:[]}},methods:{load:function(){var e=this;this.$RequestUtil.post({url:"/test/findUserVOById.do",params:{id:localStorage.getItem("wuyuanIotUserId")},success:function(t){e.user=t.userDetailVO,e.role=t.role.roleName,e.password="*********"}})},edit:function(e){this.visible[e]=!0,this.editVisible=!0},sureEdit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$RequestUtil.post({url:"/test/modifyMySelf.do",params:e.editForm,success:function(t){"success"==t.result?(e.$message({type:"success",message:t.message}),e.load(),e.visible.nickName=!1,e.visible.password=!1,e.visible.tel=!1,e.visible.email=!1,e.editVisible=!1):e.$message({type:"error",message:t.message})}})})},handleClose:function(e){this.visible.nickName=!1,this.visible.password=!1,this.visible.tel=!1,this.visible.email=!1,this.editForm.password="",this.editForm.rePassword="",this.editForm.oldPassword="",this.editForm.nickName="",this.editForm.tel="",this.editForm.email=""},querySearch:function(e,t){/^.+@.+$/.test(e)?t(this.hints.filter(function(t){return 0===t.value.indexOf(e)})):(this.hints=[],/^.+@$/.test(e)&&(this.hints.push({value:e+"qq.com"}),this.hints.push({value:e+"163.com"}),this.hints.push({value:e+"sina.com"}),this.hints.push({value:e+"126.com"}),this.hints.push({value:e+"sohu.com"}),this.hints.push({value:e+"yahoo.com.cn"})),t(this.hints))}},components:{},created:function(){this.load()}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("el-row",{attrs:{type:"flex"}},[s("el-col",{attrs:{span:4}},[e._v("账号：")]),e._v(" "),s("el-col",{attrs:{span:6}},[e._v(e._s(e.user.userName))])],1),e._v(" "),s("br"),e._v(" "),s("el-row",{attrs:{type:"flex"}},[s("el-col",{attrs:{span:4}},[e._v("密码：")]),e._v(" "),s("el-col",{attrs:{span:6}},[e._v(e._s(e.password))]),e._v(" "),1==e.userStatus?s("el-col",{attrs:{span:1}},[s("i",{staticClass:"el-icon-edit",staticStyle:{color:"dodgerblue",cursor:"pointer"},on:{click:function(t){return e.edit("password")}}})]):e._e()],1),e._v(" "),s("br"),e._v(" "),s("el-row",{attrs:{type:"flex"}},[s("el-col",{attrs:{span:4}},[e._v("昵称：")]),e._v(" "),s("el-col",{attrs:{span:6}},[e._v(e._s(e.user.nickName))]),e._v(" "),1==e.userStatus?s("el-col",{attrs:{span:1}},[s("i",{staticClass:"el-icon-edit",staticStyle:{color:"dodgerblue",cursor:"pointer"},on:{click:function(t){return e.edit("nickName")}}})]):e._e()],1),e._v(" "),s("br"),e._v(" "),s("el-row",{attrs:{type:"flex"}},[s("el-col",{attrs:{span:4}},[e._v("手机号：")]),e._v(" "),s("el-col",{attrs:{span:6}},[e._v(e._s(e.user.userTel))]),e._v(" "),1==e.userStatus?s("el-col",{attrs:{span:1}},[s("i",{staticClass:"el-icon-edit",staticStyle:{color:"dodgerblue",cursor:"pointer"},on:{click:function(t){return e.edit("tel")}}})]):e._e()],1),e._v(" "),s("br"),e._v(" "),s("el-row",{attrs:{type:"flex"}},[s("el-col",{attrs:{span:4}},[e._v("email：")]),e._v(" "),s("el-col",{attrs:{span:6}},[e._v(e._s(e.user.email))]),e._v(" "),1==e.userStatus?s("el-col",{attrs:{span:1}},[s("i",{staticClass:"el-icon-edit",staticStyle:{color:"dodgerblue",cursor:"pointer"},on:{click:function(t){return e.edit("email")}}})]):e._e()],1),e._v(" "),s("br"),e._v(" "),s("el-row",{attrs:{type:"flex"}},[s("el-col",{attrs:{span:4}},[e._v("角色：")]),e._v(" "),s("el-col",{attrs:{span:6}},[e._v(e._s(e.role))])],1),e._v(" "),s("el-dialog",{attrs:{"close-on-click-modal":!1,title:"修改",visible:e.editVisible,width:"350px"},on:{"update:visible":function(t){e.editVisible=t},close:e.handleClose}},[s("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"120px","label-position":"right"}},[e.visible.password?s("el-form-item",{attrs:{label:"原密码：",prop:"oldPassword"}},[s("el-input",{attrs:{type:"password"},model:{value:e.editForm.oldPassword,callback:function(t){e.$set(e.editForm,"oldPassword",t)},expression:"editForm.oldPassword"}})],1):e._e(),e._v(" "),e.visible.password?s("el-form-item",{attrs:{label:"新密码：",prop:"password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.editForm.password,callback:function(t){e.$set(e.editForm,"password",t)},expression:"editForm.password"}})],1):e._e(),e._v(" "),e.visible.password?s("el-form-item",{attrs:{label:"重新输入密码：",prop:"rePassword"}},[s("el-input",{attrs:{type:"password"},model:{value:e.editForm.rePassword,callback:function(t){e.$set(e.editForm,"rePassword",t)},expression:"editForm.rePassword"}})],1):e._e(),e._v(" "),e.visible.nickName?s("el-form-item",{attrs:{label:"昵称：",prop:"nickName"}},[s("el-input",{model:{value:e.editForm.nickName,callback:function(t){e.$set(e.editForm,"nickName",t)},expression:"editForm.nickName"}})],1):e._e(),e._v(" "),e.visible.tel?s("el-form-item",{attrs:{label:"手机号：",prop:"tel"}},[s("el-input",{attrs:{maxlength:"11"},model:{value:e.editForm.tel,callback:function(t){e.$set(e.editForm,"tel",t)},expression:"editForm.tel"}})],1):e._e(),e._v(" "),e.visible.email?s("el-form-item",{attrs:{label:"邮箱：",prop:"email"}},[s("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch,"trigger-on-focus":!1},model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email",t)},expression:"editForm.email"}})],1):e._e()],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.sureEdit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var l=s("C7Lr")(r,i,!1,function(e){s("gDzC")},"data-v-3a8ae5bd",null);t.default=l.exports},gDzC:function(e,t){}});